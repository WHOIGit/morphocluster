<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	<link rel="icon" href="/static/favicon.png">
	<title>{% block title %}{% endblock %}</title>

	<!-- Bootstrap -->
	<link href="/static/css/bootstrap.min.css" rel="stylesheet">
	<!-- Material Design Icons -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.4.47/css/materialdesignicons.min.css">
	<link href="/static/css/layout.css" rel="stylesheet">

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	    <![endif]-->
	{% block head_last %}{% endblock %}
</head>

<body>
	<nav id="navbar" class="navbar navbar-expand-lg navbar-light bg-dark">
		<a class="navbar-brand text-light" href="/">
			<img src="/frontend/favicon.png" alt="MorphoCluster" class="navbar-logo" style="height: 32px; width: 32px; object-fit: contain; margin-right: 0.5rem;" />
			MorphoCluster
		</a>
		<ul class="navbar-nav mr-auto" id="nav-title">
		</ul>
		<div id="nav-info" class="text-light"></div>
		<button id="dark-mode-toggle" class="dark-mode-toggle" title="Toggle Dark Mode" style="background: none; border: none; color: #ffffff; font-size: 1.5rem; cursor: pointer; padding: 0.25rem 0.5rem;">
			<i class="mdi mdi-weather-sunny"></i>
		</button>
	</nav>


	<!-- Begin page content -->
	<div id="content" class="container">
		{% with messages = get_flashed_messages() %} {% if messages %} {% for message in messages %}
		<div class="alert alert-block alert-error fade in">
			<a class="close" data-dismiss="alert">&times;</a> {{ message }}
		</div>
		{% endfor %} {% endif %} {% endwith %} {% block content %}{% endblock %}
	</div>

	{#
	<div id="footer">
		<div class="container">
			<p>Your Company &copy; All Rights Reserved.</p>
			{% block footer %}{% endblock %}
		</div>
	</div>
	#}

	<script src="/static/js/jquery.min.js"></script>
	<script src="/static/js/popper.min.js"></script>
	<script src="/static/js/bootstrap.min.js"></script>

	<script>
		// Dark mode toggle functionality
		(function() {
			const toggle = document.getElementById('dark-mode-toggle');
			const icon = toggle.querySelector('i');

			// Initialize dark mode from localStorage
			const isDark = localStorage.getItem('dark-mode') === 'true';
			if (isDark) {
				document.documentElement.classList.add('dark-mode');
				icon.className = 'mdi mdi-moon-waning-crescent';
			}

			// Apply logo filter in dark mode
			const logo = document.querySelector('.navbar-logo');
			if (logo && isDark) {
				logo.style.filter = 'brightness(0) invert(1)';
			}

			// Toggle dark mode on click
			toggle.addEventListener('click', function() {
				const isDarkNow = document.documentElement.classList.toggle('dark-mode');
				localStorage.setItem('dark-mode', isDarkNow);
				icon.className = isDarkNow ? 'mdi mdi-moon-waning-crescent' : 'mdi mdi-weather-sunny';

				// Update logo filter
				if (logo) {
					logo.style.filter = isDarkNow ? 'brightness(0) invert(1)' : '';
				}
			});
		})();
	</script>

	{% block body_last %}{% endblock %}
</body>

</html>